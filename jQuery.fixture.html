<!DOCTYPE html>

<!--[if lt IE 7]>
<html class="no-js ie lt-ie9 lt-ie8 lt-ie7" lang="en">
<![endif]-->
<!--[if IE 7]>
<html class="no-js ie lt-ie9 lt-ie8" lang="en">
<![endif]-->
<!--[if IE 8]>
<html class="no-js ie lt-ie9" lang="en">
<![endif]-->
<!--[if IE 9]>
<html class="no-js ie ie9" lang="en">
<![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>jQueryMX  - jQuery.fixture</title>
	<meta name="description" content="">
	<meta name="author" content="">
	
	<link rel="stylesheet" type="text/css" href="./static/bundles/static.css">
	
	<!--[if lt IE 9]>
   <script type="text/javascript" src="static/html5shiv.js"></script>
    <!--<![endif]-->
</head>

<body class="docs">
	<header>
		<nav class="container">

			<div class="logo-menu">
				<a class="brand" href="./index.html">jQueryMX</a>
			</div>

			<div class="pull-right">
				<div class="bitovi-menu">
					<a href="http://bitovi.com" class="bitovi icon-bits">Bitovi</a>
					<ul class="dropdown-menu">
						<li><a href="http://bitovi.com">Bitovi.com</a></li>
						<li><a href="http://bitovi.com/blog/">Blog</a></li>
						<li><a href="http://bitovi.com/consulting/">Consulting</a></li>
						<li><a href="http://bitovi.com/training/">Training</a></li>
						<li><a href="http://bitovi.com/open-source/">Open Source</a></li>
						<li><a href="http://bitovi.com/people/">People</a></li>
						<li><a href="http://bitovi.com/contact/">Contact Us</a></li>
					</ul>
				</div>
			</div>
		</nav>
	</header>

	
<div class="container api">

	
	<nav class="sidebar">
		
		<ul class="api cascading primary-grouping"> 
	
		
		<li class="search-container active parent">
			<a class="sidebar-title" href="index.html" data-search="jQueryMX">
				jQueryMX
			</a>
		</li>
		
		<li class="search-container active parent">
			<a class="sidebar-title" href="dom.html" data-search="DOM Helpers">
				DOM Helpers
			</a>
		</li>
		
		
			<li class="search-container active">
			<a class="sidebar-title" href="jQuery.fixture.html" data-search="jQuery.fixture">
				jQuery.fixture
			</a>
			
	<ul>
		
			
				
				
				<li class="search-container">
					<a class="function" href="jQuery.fixture.make.html" data-search="jQuery.fixture.make">
						make
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="function" href="jQuery.fixture.rand.html" data-search="jQuery.fixture.rand">
						rand
					</a>
				</li>
				
			
			
		
			
				
				
				<li class="search-container">
					<a class="page" href="jquery.fixture.0organizing.html" data-search="Organizing Fixtures">
						Organizing Fixtures
					</a>
				</li>
				
			
			
		
	</ul>


		</li>
		
	
</ul>

	</nav>
	
	
	
	<article class="content docs">
	
	
		
		<section class="title">
			<div class="heading">
<h1>jQuery.fixture</h1>
	<ul class="tags">
		<li>function</li>
	</ul>
	<span class="module">jquery/dom/fixture</span>
	
</div>

<div class="sub-heading">
	
	
	<span class="inherits">&nbsp;</span>
</div>

<ul class="links">
	
	
	
		<li><a href="../jquerymx/http:/jmvcsite.heroku.com/pluginify?plugins[]=jquery/dom/fixture/fixture.js">download</a></li>
	
	
		<li><a href="../jquery/dom/fixture/qunit.html">tests</a></li>
	
</ul>
<br />
		</section>
		
		
		
		<section class="contents">
		</section>
		
		
		

		
		<section class="description">
			<p><code>$.fixture</code> intercepts a AJAX request and simulates
the response with a file or function. They are a great technique
when you want to develop JavaScript
independently of the backend.</p>

		</section>
		

		
			
		
		
		
			<section class="signature">
				<h2 id="sig_">dom.fixture(settings, fixture)
</h2>
<div class="signature-wrapper">
<p><code>$.fixture</code> intercepts a AJAX request and simulates
the response with a file or function. They are a great technique
when you want to develop JavaScript
independently of the backend.</p>


	<h3>Parameters</h3>

	<ol class="parameters">
		
		<li class="parameter">
			<h4>settings
				<code>{Object | String}</code></h4>
			<div class="description">
				<p>Configures the AJAX requests the fixture should
intercept.  If an <strong>object</strong> is passed, the object's properties and values
are matched against the settings passed to $.ajax.</p>
<p>If a <strong>string</strong> is passed, it can be used to match the url and type. Urls
can be templated, using <code>{NAME}</code> as wildcards.</p>

			</div>
			
			
			
			
			
		</li>
		
		<li class="parameter">
			<h4>fixture
				<code>{function() | String}</code></h4>
			<div class="description">
				<p>The response to use for the AJAX
request. If a <strong>string</strong> url is passed, the ajax request is redirected
to the url. If a <strong>function</strong> is provided, it looks like:</p>
<pre><code>fixture( originalSettings, settings, headers    )
</code></pre>
<p>where:</p>
<ul>
<li>originalSettings - the orignal settings passed to $.ajax</li>
<li>settings - the settings after all filters have run</li>
<li>headers - request headers</li>
</ul>
<p>If <strong>null</strong> is passed, and there is a fixture at settings, that fixture will be removed,
allowing the AJAX request to behave normally.</p>

			</div>
			
			
			
			
			
		</li>
		
	</ol>






</div>

			</section>
		
		

		
		<section class="comment">
			<h2>Types of Fixtures</h2>
<p>There are two common ways of using fixtures.  The first is to
map Ajax requests to another file.  The following
intercepts requests to <code>/tasks.json</code> and directs them
to <code>fixtures/tasks.json</code>:</p>
<pre><code>$.fixture(&quot;/tasks.json&quot;,&quot;fixtures/tasks.json&quot;);
</code></pre>
<p>The other common option is to generate the Ajax response with
a function.  The following intercepts updating tasks at
<code>/tasks/ID.json</code> and responds with updated data:</p>
<pre><code>$.fixture(&quot;PUT /tasks/{id}.json&quot;, function(original, settings, headers){
   return { updatedAt : new Date().getTime() }
})
</code></pre>
<p>We categorize fixtures into the following types:</p>
<ul>
<li><strong>Static</strong> - the response is in a file.</li>
<li><strong>Dynamic</strong> - the response is generated by a function.</li>
</ul>
<p>There are different ways to lookup static and dynamic fixtures.</p>
<h2>Static Fixtures</h2>
<p>Static fixtures use an alternate url as the response of the Ajax request.</p>
<pre><code>// looks in fixtures/tasks1.json relative to page
$.fixture(&quot;tasks/1&quot;, &quot;fixtures/task1.json&quot;);

$.fixture(&quot;tasks/1&quot;, &quot;//fixtures/task1.json&quot;);
</code></pre>
<h2>Dynamic Fixtures</h2>
<p>Dynamic Fixtures are functions that get the details of
the Ajax request and return the result of the mocked service
request from your server.</p>
<p>For example, the following returns a successful response
with JSON data from the server:</p>
<pre><code>$.fixture(&quot;/foobar.json&quot;, function(orig, settings, headers){
  return [200, &quot;success&quot;, {json: {foo: &quot;bar&quot; } }, {} ]
})
</code></pre>
<p>The fixture function has the following signature:</p>
<pre><code>function( originalOptions, options, headers ) {
  return [ status, statusText, responses, responseHeaders ]
}
</code></pre>
<p>where the fixture function is called with:</p>
<ul>
<li>originalOptions - are the options provided to the ajax method, unmodified,
and thus, without defaults from ajaxSettings</li>
<li>options - are the request options</li>
<li>headers - a map of key/value request headers</li>
</ul>
<p>and the fixture function returns an array as arguments for  ajaxTransport's <code>completeCallback</code> with:</p>
<ul>
<li>status - is the HTTP status code of the response.</li>
<li>statusText - the status text of the response</li>
<li>responses - a map of dataType/value that contains the responses for each data format supported</li>
<li>headers - response headers</li>
</ul>
<p>However, $.fixture handles the
common case where you want a successful response with JSON data.  The
previous can be written like:</p>
<pre><code>$.fixture(&quot;/foobar.json&quot;, function(orig, settings, headers){
  return {foo: &quot;bar&quot; };
})
</code></pre>
<p>If you want to return an array of data, wrap your array in another array:</p>
<pre><code>$.fixture(&quot;/tasks.json&quot;, function(orig, settings, headers){
  return [ [ &quot;first&quot;,&quot;second&quot;,&quot;third&quot;] ];
})
</code></pre>
<p>$.fixture works closesly with jQuery's
ajaxTransport system.  Understanding it is the key to creating advanced
fixtures.</p>
<h3>Templated Urls</h3>
<p>Often, you want a dynamic fixture to handle urls
for multiple resources (for example a REST url scheme). $.fixture's
templated urls allow you to match urls with a wildcard.</p>
<p>The following example simulates services that get and update 100 todos.</p>
<pre><code>// create todos
var todos = {};
for(var i = 0; i &lt; 100; i++) {
  todos[i] = {
    id: i,
    name: &quot;Todo &quot;+i
  }
}
$.fixture(&quot;GET /todos/{id}&quot;, function(orig){
  // return the JSON data
  // notice that id is pulled from the url and added to data
  return todos[orig.data.id]
})
$.fixture(&quot;PUT /todos/{id}&quot;, function(orig){
  // update the todo's data
  $.extend( todos[orig.data.id], orig.data );
  
  // return data
  return {};
})
</code></pre>
<p>Notice that data found in templated urls (ex: <code>{id}</code>) is added to the original
data object.</p>
<h2>Simulating Errors</h2>
<p>The following simulates an unauthorized request
to <code>/foo</code>.</p>
<pre><code>$.fixture(&quot;/foo&quot;, function(){
    return [401,&quot;{type: 'unauthorized'}&quot;]
   });
</code></pre>
<p>This could be received by the following Ajax request:</p>
<pre><code>$.ajax({
  url: '/foo',
  error : function(jqXhr, status, statusText){
    // status === 'error'
    // statusText === &quot;{type: 'unauthorized'}&quot;
  }
})
</code></pre>
<h2>Turning off Fixtures</h2>
<p>You can remove a fixture by passing <code>null</code> for the fixture option:</p>
<pre><code>// add a fixture
$.fixture(&quot;GET todos.json&quot;,&quot;//fixtures/todos.json&quot;);

// remove the fixture
$.fixture(&quot;GET todos.json&quot;, null)
</code></pre>
<p>You can also set [jQuery.fixture.on $.fixture.on] to false:</p>
<pre><code>$.fixture.on = false;
</code></pre>
<h2>Make</h2>
<p><a href="jQuery.fixture.make.html">$.fixture.make</a> makes a CRUD service layer that handles sorting, grouping,
filtering and more.</p>
<h2>Testing Performance</h2>
<p>Dynamic fixtures are awesome for performance testing.  Want to see what
10000 files does to your app's performance?  Make a fixture that returns 10000 items.</p>
<p>What to see what the app feels like when a request takes 5 seconds to return?  Set
[jQuery.fixture.delay] to 5000.</p>
<div class='demo_wrapper' data-demo-src='jquery/dom/fixture/fixture.html'></div>

		</section>
		
		

		
	
	
	</article>
	
	

</div>





	
	<footer>
		<nav class="container">
			<a class="brand javascriptmvc" href="index.html"></a>
		</nav>
	</footer>
	
	
	<script type="text/javascript">
		var docObject = {"type":"function","name":"jQuery.fixture","params":[{"types":[{"type":"Object"},{"type":"String"}],"name":"settings","description":"Configures the AJAX requests the fixture should \nintercept.  If an __object__ is passed, the object's properties and values\nare matched against the settings passed to $.ajax.  \n\nIf a __string__ is passed, it can be used to match the url and type. Urls\ncan be templated, using <code>{NAME}</code> as wildcards."},{"types":[{"type":"function","returns":{"types":[{"type":"undefined"}]},"params":[]},{"type":"String"}],"name":"fixture","description":"The response to use for the AJAX \nrequest. If a __string__ url is passed, the ajax request is redirected\nto the url. If a __function__ is provided, it looks like:\n\n    fixture( originalSettings, settings, headers\t)\n    \nwhere:\n\n  - originalSettings - the orignal settings passed to $.ajax\n  - settings - the settings after all filters have run\n  - headers - request headers\n  \nIf __null__ is passed, and there is a fixture at settings, that fixture will be removed,\nallowing the AJAX request to behave normally."}],"parent":"dom","src":"dom/fixture/fixture.js","line":184,"codeLine":382,"description":"<code>$.fixture</code> intercepts a AJAX request and simulates\nthe response with a file or function. They are a great technique \nwhen you want to develop JavaScript \nindependently of the backend.","title":"","plugin":"jquery/dom/fixture","download":"http://jmvcsite.heroku.com/pluginify?plugins[]=jquery/dom/fixture/fixture.js","test":"jquery/dom/fixture/qunit.html","glob":{"ignore":"{node_modules,bower_components}/**/*","pattern":"**/*.{md,js}","cwd":"/Users/webmech/dev/jquerymx"},"debug":true,"dest":"/Users/webmech/dev/docs","generators":["html"],"docConfigDest":"../jquerymx/documentjs.json","project":{}};
	</script>
	
	
		<script>
		  steal = {
		    instantiated: {
		      "bundles/static.css!$css" : null
		    }
		  }
		</script>
		<script type='text/javascript' 
				data-main="static"
				data-config="./static/config.js"
				src="./static/steal.production.js"
	    		bundles-path="bundles"></script>
	
</body>

</html>
